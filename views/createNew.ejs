<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
  <!-- Meta Tags -->
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="author" content="YooKits" />
  <!-- Page Title -->
  <title><%= config.mainTitle %> | <%= config.pages.createNew.title %></title>
  <!-- Favicon Icon -->
  <link rel="icon" href="assets/img/favicon.png">
  <!-- CSS -->
  <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="assets/css/jqvmap.min.css" />
  <link rel="stylesheet" type="text/css" href="assets/css/iDashboard.css" />
  <link rel="stylesheet" href="assets/css/toastr.min.css">
</head>

<body>
  <div class="yoo-height-b60 yoo-height-lg-b60"></div>
  <header class="yoo-header yoo-style1 yoo-sticky-menu">
    <div class="yoo-main-header">
      <div class="yoo-main-header-in">
        <div class="yoo-main-header-left">
          <a href="/" class="yoo-logo-link yoo-light-logo">
            <h3 style="color: white; margin: 0;"><%= config.mainTitle %></h3>
          </a>
        </div>
      </div>
    </div>
  </header><!-- .yoo-header -->
  <div class="yoo-sidebarheader-toggle">
    <div class="yoo-button-bar1"></div>
    <div class="yoo-button-bar2"></div>
    <div class="yoo-button-bar3"></div>
  </div><!-- .yoo-sidebarheader-toggle -->
  <div class="yoo-sidebarheader">
    <div class="yoo-sidebarheader-in" data-scrollbar>
      <div class="yoo-sidebar-nav">
        <ul class="yoo-sidebar-nav-list yoo-mp0">
          <li>
            <a href="<%= config.pages.main.path %>" class="page">
              <span class="yoo-sidebar-link-title">
                <span class="yoo-sidebar-link-icon yoo-style1">
                  <ion-icon name="layers"></ion-icon>
                </span>
                <span class="yoo-sidebar-link-text"><%= config.pages.main.title %></span>
              </span>
            </a>
          </li>
          <li class="active">
            <a href="<%= config.pages.createNew.path %>" class="page">
              <span class="yoo-sidebar-link-title">
                <span class="yoo-sidebar-link-icon yoo-style1">
                  <ion-icon name="create-outline"></ion-icon>
                </span>
                <span class="yoo-sidebar-link-text"><%= config.pages.createNew.title %></span>
              </span>
            </a>
          </li>
        </ul><!-- .yoo-sidebar-nav-list -->
      </div>
    </div>
  </div>

  <div class="yoo-content yoo-style1">
    <div class="yoo-height-b30 yoo-height-lg-b30"></div>
    <div class="container-fluid">
      <div class="yoo-uikits-heading">
        <h2 class="yoo-uikits-title"><%= config.pages.createNew.title %></h2>
      </div>
    </div>
    <div class="yoo-height-b30 yoo-height-lg-b30"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="<%= config.pages.createNew.body.mainCard.style.class %>">
            <div class="yoo-card-heading">
              <div class="yoo-card-heading-left">
                <h2 class="yoo-card-title"><%= config.pages.createNew.body.mainCard.title %></h2>
              </div>
            </div>
            <div class="yoo-card-body">
              <div class="yoo-padd-lr-20">
                <div class="yoo-height-b20 yoo-height-lg-b20"></div>
                <form method="POST" onsubmit="createVH(); return false;">
                  <div class="form-group level-up active1">
                    <label for="virtualhostContent"><%= config.pages.createNew.body.mainCard.body.virtualHostTextArea.placeholder %></label>
                    <textarea class="form-control" id="virtualhostContent" rows="6"
                      style="font-family: 'Courier New', Courier, monospace" required><%= config.pages.createNew.body.mainCard.body.virtualHostTextArea.content %></textarea>
                    <div class="yoo-height-b5 yoo-height-lg-b5"></div>
                  </div>
                  <div class="col-md-4">
                    <p><%= config.pages.createNew.body.mainCard.body.save.saveToMsg %></p>
                    <div class="<%= config.pages.createNew.body.mainCard.body.save.saveTextArea.style.class %>">
                      <label for="inputFileName"
                        style="font-family: 'Courier New', Courier, monospace; font-size: 12px;"><%= config.pages.createNew.body.mainCard.body.save.saveTextArea.placeholder %></label>
                      <input type="text" class="form-control" id="inputFileName"
                        style="font-family: 'Courier New', Courier, monospace;" onkeyup="processSavePath(this)"
                        required>
                    </div>
                  </div>
                  <div class="form-group row">
                    <div class="col-sm-10">
                      <button type="submit" class="<%= config.pages.createNew.body.mainCard.body.save.saveBTN.style.class %>"><%= config.pages.createNew.body.mainCard.body.save.saveBTN.preTitle %> <code
                          id="savePath"><%= config.pages.createNew.body.mainCard.body.save.saveBTN.prePath %><code id="saveFileName"></code>.conf</code></button>
                    </div>
                  </div>

                </form>
                <div class="yoo-height-b5 yoo-height-lg-b5"></div>
              </div>

            </div>
          </div><!-- .yoo-card -->
        </div>
      </div>
    </div>
    <div class="yoo-height-b30 yoo-height-lg-b30"></div>
    <footer class="yoo-footer yoo-style1">
      <div class="container-fluid">
        <div class="yoo-footer-content">
          <div class="yoo-copyride">Made with coffee &amp; love by <a href="https://nullx.me/" target="_blank">nullx</a>
            Â©All rights reserved.</div>
        </div>
      </div>
    </footer>
  </div><!-- .yoo-content -->

  <!-- Required Scripts -->
  <script src="assets/js/jquery-1.12.4.min.js"></script>
  <script src="assets/js/bootstrap.bundle.min.js"></script>
  <script src="assets/js/iDashboard.js?v=0.06"></script>
  <script src="assets/js/ionicons/ionicons.js"></script>
  <script src="assets/js/toastr.min.js"></script>
  <script src="assets/js/iApache2.js"></script>

  <script>
    function processSavePath(input) {
      document.getElementById("saveFileName").textContent = input.value
    }
    function createVH() {
      var http = new XMLHttpRequest();
      var url = '<%= config.endpoints.createVH.path %>';
      var params = `path=${document.getElementById("savePath").textContent}&vhContent=${document.getElementById("virtualhostContent").textContent}`;
      http.open('<%= config.endpoints.createVH.method %>', url, true);

      http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

      http.onreadystatechange = function () {//Call a function when the state changes.
        if (http.readyState == 4 && http.status == 200) {
          proccessOutput(JSON.parse(http.responseText))
        }
      }
      http.send(params);
    }
    function proccessOutput(obj) {
      if (obj.err) {
        toastr.error(JSON.stringify(obj.err))
      } else if (obj.code == 0 && obj.msg) {
        toastr.success(obj.msg)
      }
    }
  </script>
</body>

</html>